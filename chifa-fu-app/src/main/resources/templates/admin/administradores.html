<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Control de Administradores</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" th:href="@{/navbar.css}" />
</head>
<body style="background-color: #fff7f0;">
    <!-- Navbar -->
    <div th:replace="fragments/navbarAdmin :: navbarAdmin"></div>

    <main class="container my-5">

        <!-- Formulario -->
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card shadow-lg p-4 border-0 rounded-3">
                    <h3 class="text-center mb-4 text-warning">Registrar Administrador</h3>

                    <!-- Mensaje éxito -->
                    <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
                        <strong>Cuenta creada satisfactoriamente</strong>
                        <a class="ms-2" href="/login">Iniciar Sesión</a>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <form th:object="${registroDto}" method="POST">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <input type="hidden" name="rol" th:value="'ADMIN'" />

                        <!-- Nombre -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Nombre</label>
                            <input type="text" th:field="*{nombre}" class="form-control" placeholder="Ingrese su nombre"/>
                            <small class="text-danger" th:errors="*{nombre}"></small>
                        </div>

                        <!-- Apellido -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Apellido</label>
                            <input type="text" th:field="*{apellido}" class="form-control" placeholder="Ingrese su apellido"/>
                            <small class="text-danger" th:errors="*{apellido}"></small>
                        </div>

                        <!-- DNI -->
                        <div class="mb-3">
                            <label class="form-label text-warning">DNI</label>
                            <input type="text" th:field="*{dni}" class="form-control" placeholder="Ingrese su DNI"/>
                            <small class="text-danger" th:errors="*{dni}"></small>
                        </div>

                        <!-- Teléfono -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Teléfono</label>
                            <input type="text" th:field="*{telefono}" class="form-control" placeholder="Ingrese su teléfono"/>
                            <small class="text-danger" th:errors="*{telefono}"></small>
                        </div>

                        <!-- Dirección -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Dirección</label>
                            <input type="text" th:field="*{direccionPredeterminada}" class="form-control" placeholder="Ingrese su dirección"/>
                            <small class="text-danger" th:errors="*{direccionPredeterminada}"></small>
                        </div>

                        <!-- Email -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Correo Electrónico</label>
                            <input type="email" th:field="*{email}" class="form-control" placeholder="Ingrese su email"/>
                            <small class="text-danger" th:errors="*{email}"></small>
                        </div>

                        <!-- Contraseña -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Contraseña</label>
                            <input type="password" th:field="*{contrasena}" class="form-control" placeholder="Ingrese su contraseña"/>
                            <small class="text-danger" th:errors="*{contrasena}"></small>
                        </div>

                        <!-- Confirmar Contraseña -->
                        <div class="mb-3">
                            <label class="form-label text-warning">Confirmar Contraseña</label>
                            <input type="password" th:field="*{confirmarContrasena}" class="form-control" placeholder="Confirme su contraseña"/>
                            <small class="text-danger" th:errors="*{confirmarContrasena}"></small>
                        </div>

                        <!-- Botón -->
                        <button class="btn btn-warning w-100 text-white">Registrar</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Tabla Administradores -->
        <div class="mt-5">
            <h2 class="text-center text-danger mb-4">Lista de Administradores</h2>
            <div class="table-responsive">
                <table class="table table-striped table-hover text-center align-middle">
                    <thead class="table-warning text-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>DNI</th>
                            <th>Teléfono</th>
                            <th>Dirección</th>
                            <th>Email</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="administrador : ${administradores}">
                            <td th:text="${administrador.idUsuario}"></td>
                            <td th:text="${administrador.nombre}"></td>
                            <td th:text="${administrador.apellido}"></td>
                            <td th:text="${administrador.dni}"></td>
                            <td th:text="${administrador.telefono}"></td>
                            <td th:text="${administrador.direccionPredeterminada}"></td>
                            <td th:text="${administrador.email}"></td>
                            <td>
                                <a class="btn btn-sm btn-danger" th:href="@{'/admin/clientes/eliminar?idUsuario=' + ${administrador.idUsuario}}">
                                    <i class="fas fa-trash"></i> Eliminar
                                </a>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(administradores)}">
                            <td colspan="8" class="text-muted">No hay administradores registrados.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
